<!DOCTYPE>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link type="text/css" rel="stylesheet" href="http://cdn.brianreber.com/css/bootstrap.min.css">

<style type="text/css">
	body {
		padding-top: 60px;
	}
</style>

<script type="text/javascript" src="http://cdn.brianreber.com/js/jquery.min.js"></script>
<script type="text/javascript" src="http://cdn.brianreber.com/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript" src="http://cdn.brianreber.com/js/sprintf.js"></script>

<title>Google Analytics -- Coke Rewards</title>
</head>
<body onload="renderGraph()">
<div class="navbar navbar-inverse navbar-fixed-top">
	<div class="navbar-inner">
		<div class="container">
			<a class="brand" href="/">Google Analytics</a>
			<div class="btn-group pull-right">
				<a class="btn dropdown-toggle" id="authorize-button" style="visibility: hidden" href="#">
					Authorize Analytics
				</a>
			</div>
		</div>
	</div>
</div>
<div class="container">
	<div id="ui" style="display:none">
		<div id='eventsOverTimeConfig' style="display:none"></div>
		<div id='eventsTableConfig'></div>
	</div>

	<!-- Load all libraries and run some JS code -->
	<script type="text/javascript" src="js/gadash-1.0.js"></script>
	<script type="text/javascript" src="https://apis.google.com/js/client.js?onload=gadashInit"></script>
	<script>
	var API_KEY = 'AIzaSyCaNON-QMTVbivCx6NUG_jCcQzsduouyGA';
	var CLIENT_ID = '558578181862-rnm2m6451vmhugfmd549ctbo5q26vt3a.apps.googleusercontent.com';
	var TABLE_ID = 'ga:55070743';
  
	var currentDate = new Date();
	var dateString = sprintf("%4d-%02d-%02d", currentDate.getFullYear(), 
				currentDate.getMonth() + 1, currentDate.getDate());
	gadash.configKeys({
		'apiKey': API_KEY,
		'clientId': CLIENT_ID
	});

	// Create new Chart.
	var eventsOverTime = new gadash.Chart();
	var eventsTable = new gadash.Chart();
	
	// Base chart configuration. Used for all charts.
	var eventsOverTimeConfig = {
		'divContainer': 'eventsOverTimeConfig',
		'type': 'LineChart',
		'query': {
			'ids': TABLE_ID,
			'metrics': 'ga:totalEvents',
			'start-date':'2012-01-16',
			'end-date': dateString
		},
		'chartOptions': {
			width: 800,
			height: 500,
			curveType: 'function'
		}
	};
	
	var eventsTableConfig = {
		'divContainer': 'eventsTableConfig',
		'type': 'Table',
		'query': {
			'ids': TABLE_ID,
			'metrics': 'ga:totalEvents',
			'start-date':'2012-01-16',
			'end-date': dateString,
			'dimensions': 'ga:eventCategory',
			'sort': '-ga:totalEvents'
		}
	};
	
	function renderGraph() {
		eventsTable.set(eventsTableConfig).render();

		// Display UI.
		document.getElementById('ui').style.display = 'block';
	};
	</script>
</div>
</body>
</html>
