<!DOCTYPE>
<html>
<head><title>Google Analytics -- Coke Rewards</title></head>
<body>
	<h1>Coke Rewards Event Tracking</h1>
	<hr>
	<!-- Add Google Analytics authorization button -->
	<button id="authorize-button" style="visibility: hidden">Authorize Analytics</button>
	
	<div id="ui" style="display:none">
		<h3>Events Over Time</h3>
		<div id='eventsOverTimeConfig'></div>
		<div id='eventsTableConfig'></div>
	</div>

	<!-- Load all libraries and run some JS code -->
	<script src="js/sprintf.js"></script>
	<script src="https://www.google.com/jsapi"></script>
	<script src="js/gadash-1.0.js"></script>
	<script src="https://apis.google.com/js/client.js?onload=gadashInit"></script>
	<script>
	var API_KEY = 'AIzaSyCaNON-QMTVbivCx6NUG_jCcQzsduouyGA';
	var CLIENT_ID = '558578181862-rnm2m6451vmhugfmd549ctbo5q26vt3a.apps.googleusercontent.com';
	var TABLE_ID = 'ga:55070743';
  
	var currentDate = new Date();
	var dateString = sprintf("%4d-%02d-%02d", currentDate.getFullYear(), 
						currentDate.getMonth(), currentDate.getDate());
	gadash.configKeys({
		'apiKey': API_KEY,
		'clientId': CLIENT_ID
	});

	// Create new Chart.
	var eventsOverTime = new gadash.Chart();
	var eventsTable = new gadash.Chart();
	
	// Base chart configuration. Used for all charts.
	var eventsOverTimeConfig = {
		'divContainer': 'eventsOverTimeConfig',
		'type': 'LineChart',
		'query': {
			'ids': TABLE_ID,
			'metrics': 'ga:totalEvents',
			'start-date':'2012-01-16',
			'end-date': dateString,
			'dimensions': 'ga:eventCategory',
			'sort': '-ga:totalEvents'
		},
		'chartOptions': {
			width: 700,
			height: 300,
			legend: {position: 'bottom'},
			hAxis: {title:'Date'},
			curveType: 'function'
		}
	};
	
	var eventsTableConfig = {
		'divContainer': 'eventsTableConfig',
		'type': 'Table',
		'query': {
			'ids': TABLE_ID,
			'metrics': 'ga:totalEvents',
			'start-date':'2012-01-16',
			'end-date': dateString,
			'dimensions': 'ga:eventCategory',
			'sort': '-ga:totalEvents'
		},
		'chartOptions': {
			width: 700,
			height: 300
		}
	};
	
	function renderGraph() {
		eventsOverTime.set(eventsOverTimeConfig).render();
		eventsTable.set(eventsTableConfig).render();
		
		// Display UI.
		document.getElementById('ui').style.display = 'block';
	};
	</script>
</body>
</html>